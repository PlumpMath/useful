<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>flatland.useful.experimental.delegate documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Useful 0.11.1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flatland</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>useful</span></div></div></li><li class="depth-3 branch"><a href="flatland.useful.bean.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bean</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.cli.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cli</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.compress.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compress</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.datatypes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datatypes</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.deftype.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deftype</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.dispatch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dispatch</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.exception.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exception</span></div></a></li><li class="depth-3"><a href="flatland.useful.experimental.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>experimental</span></div></a></li><li class="depth-4 branch current"><a href="flatland.useful.experimental.delegate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delegate</span></div></a></li><li class="depth-4"><a href="flatland.useful.experimental.unicode.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unicode</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.fn.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>fn</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.io.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.java.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>java</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.macro.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macro</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.ns.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ns</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.parallel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parallel</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.seq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>seq</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.string.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>string</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-3"><a href="flatland.useful.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="flatland.useful.experimental.delegate.html#var-canonical-name"><div class="inner"><span>canonical-name</span></div></a></li><li class="depth-1"><a href="flatland.useful.experimental.delegate.html#var-delegating-defrecord"><div class="inner"><span>delegating-defrecord</span></div></a></li><li class="depth-1"><a href="flatland.useful.experimental.delegate.html#var-delegating-deftype"><div class="inner"><span>delegating-deftype</span></div></a></li><li class="depth-1"><a href="flatland.useful.experimental.delegate.html#var-delegating-reify"><div class="inner"><span>delegating-reify</span></div></a></li><li class="depth-1"><a href="flatland.useful.experimental.delegate.html#var-emit-deftype-specs"><div class="inner"><span>emit-deftype-specs</span></div></a></li><li class="depth-1"><a href="flatland.useful.experimental.delegate.html#var-parse-deftype-specs"><div class="inner"><span>parse-deftype-specs</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">flatland.useful.experimental.delegate</h2><pre class="doc"></pre><div class="public anchor" id="var-canonical-name"><h3>canonical-name</h3><div class="usage"><code>(canonical-name sym)</code></div><pre class="doc">Resolve a symbol in the current namespace; but intead of returning its value,
return a canonical name that can be used to name the same thing in any
namespace.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/experimental/delegate.clj#L5">view source</a></div></div><div class="public anchor" id="var-delegating-defrecord"><h3>delegating-defrecord</h3><h4 class="type">macro</h4><div class="usage"><code>(delegating-defrecord cname [&amp; fields] delegate-map &amp; deftype-args)</code></div><pre class="doc">Like delegating-deftype, but creates a defrecod body instead of a deftype.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/experimental/delegate.clj#L89">view source</a></div></div><div class="public anchor" id="var-delegating-deftype"><h3>delegating-deftype</h3><h4 class="type">macro</h4><div class="usage"><code>(delegating-deftype cname [&amp; fields] delegate-map &amp; deftype-args)</code></div><pre class="doc">Shorthand for defining a new type with deftype, which delegates the methods you name to some
other object or objects. Delegates are usually a member field, but can be any expression: the
expression will be evaluated every time a method is delegated. The delegate object (or
expression) will be type-hinted with the type of the interface being delegated.

The delegate-map argument should be structured like:
  {object-to-delegate-to {Interface1 [(method1 [])
                                      (method2 [foo bar baz])]
                          Interface2 [(otherMethod [other])]},
   another-object {Interface1 [(method3 [whatever])]}}.

This will cause your deftype to include an implementation of Interface1.method1 which does its
work by forwarding to (.method1 object-to-delegate-to), and likewise for the other
methods. Arguments will be forwarded on untouched, and you should not include a `this`
parameter. Note especially that you can have methods from Interface1 implemented by delegating
to multiple objects if you choose, and can also include custom implementations for the remaining
methods of Interface1 if you have no suitable delegate.

Arguments after `delegate-map` are as with deftype, although if deftype ever has options defined
for it, delegating-deftype may break with them.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/experimental/delegate.clj#L64">view source</a></div></div><div class="public anchor" id="var-delegating-reify"><h3>delegating-reify</h3><h4 class="type">macro</h4><div class="usage"><code>(delegating-reify delegate-map &amp; reify-args)</code></div><pre class="doc">Like delegating-deftype, but creates a reify body instead of a deftype.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/experimental/delegate.clj#L95">view source</a></div></div><div class="public anchor" id="var-emit-deftype-specs"><h3>emit-deftype-specs</h3><div class="usage"><code>(emit-deftype-specs specs)</code></div><pre class="doc">Given a map returned by aggregate, spit out a flattened deftype body.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/experimental/delegate.clj#L37">view source</a></div></div><div class="public anchor" id="var-parse-deftype-specs"><h3>parse-deftype-specs</h3><div class="usage"><code>(parse-deftype-specs decls)</code></div><pre class="doc">Given a mess of deftype specs, possibly with classes/interfaces specified multiple times,
collapse it into a map like {interface =&gt; (method1 method2...)}.
Needed because core.deftype only allows specifying a class ONCE, so our delegating versions would
clash with client&apos;s custom methods.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/experimental/delegate.clj#L19">view source</a></div></div></div></body></html>