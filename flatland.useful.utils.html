<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>flatland.useful.utils documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Useful 0.11.1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flatland</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>useful</span></div></div></li><li class="depth-3 branch"><a href="flatland.useful.bean.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bean</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.cli.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cli</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.compress.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compress</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.datatypes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datatypes</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.deftype.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deftype</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.dispatch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dispatch</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.exception.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exception</span></div></a></li><li class="depth-3"><a href="flatland.useful.experimental.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>experimental</span></div></a></li><li class="depth-4 branch"><a href="flatland.useful.experimental.delegate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delegate</span></div></a></li><li class="depth-4"><a href="flatland.useful.experimental.unicode.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unicode</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.fn.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>fn</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.io.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.java.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>java</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.macro.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macro</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.ns.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ns</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.parallel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parallel</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.seq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>seq</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.string.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>string</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-3 current"><a href="flatland.useful.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="flatland.useful.utils.html#var-Adjoin"><div class="inner"><span>Adjoin</span></div></a></li><li class="depth-2"><a href="flatland.useful.utils.html#var-adjoin-onto"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>adjoin-onto</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-adjoin"><div class="inner"><span>adjoin</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-copy-meta"><div class="inner"><span>copy-meta</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-defm"><div class="inner"><span>defm</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-empty-coll.3F"><div class="inner"><span>empty-coll?</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-fail"><div class="inner"><span>fail</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-if-ns"><div class="inner"><span>if-ns</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-into-set"><div class="inner"><span>into-set</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-invoke"><div class="inner"><span>invoke</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-let-later"><div class="inner"><span>let-later</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-map-entry"><div class="inner"><span>map-entry</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-memoize-deref"><div class="inner"><span>memoize-deref</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-or-max"><div class="inner"><span>or-max</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-or-min"><div class="inner"><span>or-min</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-pair"><div class="inner"><span>pair</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-pop-if"><div class="inner"><span>pop-if</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-queue"><div class="inner"><span>queue</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-read-seq"><div class="inner"><span>read-seq</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-returning"><div class="inner"><span>returning</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-split-vec"><div class="inner"><span>split-vec</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-switch"><div class="inner"><span>switch</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-syntax-quote"><div class="inner"><span>syntax-quote</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-thread-local"><div class="inner"><span>thread-local</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-thread-local*"><div class="inner"><span>thread-local*</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-update-peek"><div class="inner"><span>update-peek</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-verify"><div class="inner"><span>verify</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-with-adjustments"><div class="inner"><span>with-adjustments</span></div></a></li><li class="depth-1"><a href="flatland.useful.utils.html#var-with-timing"><div class="inner"><span>with-timing</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">flatland.useful.utils</h2><pre class="doc"></pre><div class="public anchor" id="var-Adjoin"><h3>Adjoin</h3><h4 class="type">protocol</h4><div class="usage"></div><pre class="doc"></pre><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-adjoin-onto"><h3>adjoin-onto</h3><div class="usage"><code>(adjoin-onto left right)</code></div><pre class="doc">Merge two data structures by combining the contents. For maps, merge recursively by
adjoining values with the same key. For collections, combine the right and left using
into or conj. If the left value is a set and the right value is a map, the right value
is assumed to be an existence map where the value determines whether the key is in the
merged set. This makes sets unique from other collections because items can be deleted
from them.</pre></div></div></div></div><div class="public anchor" id="var-adjoin"><h3>adjoin</h3><div class="usage"><code>(adjoin a b)</code></div><pre class="doc">Merge two data structures by combining the contents. For maps, merge recursively by
adjoining values with the same key. For collections, combine the right and left using
into or conj. If the left value is a set and the right value is a map, the right value
is assumed to be an existence map where the value determines whether the key is in the
merged set. This makes sets unique from other collections because items can be deleted
from them.</pre></div><div class="public anchor" id="var-copy-meta"><h3>copy-meta</h3><div class="usage"><code>(copy-meta dest src)</code></div><pre class="doc">Copy all the metadata from src to dest.
</pre></div><div class="public anchor" id="var-defm"><h3>defm</h3><h4 class="type">macro</h4><div class="usage"><code>(defm &amp; defn-args)</code></div><pre class="doc">Define a function with memoization. Takes the same arguments as defn.
</pre></div><div class="public anchor" id="var-empty-coll.3F"><h3>empty-coll?</h3><div class="usage"><code>(empty-coll? x)</code></div><pre class="doc">Is x a collection and also empty?
</pre></div><div class="public anchor" id="var-fail"><h3>fail</h3><div class="usage"><code>(fail exception)</code><code>(fail string &amp; args)</code></div><pre class="doc">Raise an exception. Takes an exception or a string with format args.
</pre></div><div class="public anchor" id="var-if-ns"><h3>if-ns</h3><h4 class="type">macro</h4><div class="usage"><code>(if-ns ns-reference then-form &amp; [else-form])</code></div><pre class="doc">Try to load a namespace reference. If successful, evaluate then-form otherwise evaluate else-form.
</pre></div><div class="public anchor" id="var-into-set"><h3>into-set</h3><div class="usage"><code>(into-set set map)</code></div><pre class="doc">Update the given set using an existence map.
</pre></div><div class="public anchor" id="var-invoke"><h3>invoke</h3><div class="usage"><code>(invoke f)</code><code>(invoke f x)</code><code>(invoke f x &amp; more)</code></div><pre class="doc">Like clojure.core/apply, but doesn&apos;t expand/splice the last argument.
</pre></div><div class="public anchor" id="var-let-later"><h3>let-later</h3><h4 class="type">macro</h4><div class="usage"><code>(let-later bindings &amp; body)</code></div><pre class="doc">Behaves like let, but bindings which have :delay metadata on them are
evaluated lazily, by placing their values in a delay and forcing the
delay whenever the body of the let-later needs the value. For example,

(let-later [^:delay a (do-stuff)]
  (when (whatever) a))

will only evaluate (do-stuff) if (whatever) is true.</pre></div><div class="public anchor" id="var-map-entry"><h3>map-entry</h3><h4 class="type">macro</h4><div class="usage"><code>(map-entry a b)</code></div><pre class="doc">Create a clojure.lang.MapEntry from a and b. Equivalent to a cons cell.
flatland.useful.experimental.unicode contains a shortcut to this, named ·.</pre></div><div class="public anchor" id="var-memoize-deref"><h3>memoize-deref</h3><div class="usage"><code>(memoize-deref vars f)</code></div><pre class="doc">Returns a memoized version a non-referentially transparent function, calling deref on each
provided var (or ref or atom) and using that in the cache key to prevent cross-contamination if
any of the values change.</pre></div><div class="public anchor" id="var-or-max"><h3>or-max</h3><div class="usage"><code>(or-max &amp; args)</code></div><pre class="doc">The maximium value of vals, ignoring nils.
</pre></div><div class="public anchor" id="var-or-min"><h3>or-min</h3><div class="usage"><code>(or-min &amp; args)</code></div><pre class="doc">The minimium value of vals, ignoring nils.
</pre></div><div class="public anchor" id="var-pair"><h3>pair</h3><div class="usage"><code>(pair a b)</code></div><pre class="doc">Create a clojure.lang.MapEntry from a and b. Equivalent to a cons cell
</pre></div><div class="public anchor" id="var-pop-if"><h3>pop-if</h3><div class="usage"><code>(pop-if stack pred? &amp; [default])</code></div><pre class="doc">Pop item off the given stack if (pred? item) returns true, returning both the item and the
modified stack. If (pred? item) is false, return nil or the optional default value.</pre></div><div class="public anchor" id="var-queue"><h3>queue</h3><div class="usage"><code>(queue)</code><code>(queue seq)</code></div><pre class="doc">Create an empty persistent queue or a persistent queue from a sequence.
</pre></div><div class="public anchor" id="var-read-seq"><h3>read-seq</h3><div class="usage"><code>(read-seq)</code></div><pre class="doc">Read all forms from *in* until an EOF is reached. Throws an exception on incomplete forms.
</pre></div><div class="public anchor" id="var-returning"><h3>returning</h3><h4 class="type">macro</h4><div class="usage"><code>(returning value &amp; forms)</code></div><pre class="doc">Compute a return value, then execute other forms for side effects.
Like prog1 in common lisp, or a (do) that returns the first form.</pre></div><div class="public anchor" id="var-split-vec"><h3>split-vec</h3><div class="usage"><code>(split-vec v &amp; ns)</code></div><pre class="doc">Split the given vector at the provided offsets using subvec. Supports negative offsets.
</pre></div><div class="public anchor" id="var-switch"><h3>switch</h3><h4 class="type">macro</h4><div class="usage"><code>(switch expr &amp; clauses)</code></div><pre class="doc">Like case, but uses object equality instead of the compile-time hash. Also, switch does not
require a default clause. Of course, switch is not as efficient as case, but it works for things
like functions, which case cannot support.</pre></div><div class="public anchor" id="var-syntax-quote"><h3>syntax-quote</h3><div class="usage"><code>(syntax-quote form)</code></div><pre class="doc">Syntax quote the given form, wrapping all seqs and symbols in quote.
</pre></div><div class="public anchor" id="var-thread-local"><h3>thread-local</h3><h4 class="type">macro</h4><div class="usage"><code>(thread-local &amp; body)</code></div><pre class="doc">Takes a body of expressions, and returns a java.lang.ThreadLocal object.
(see <a href="http://download.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html">http://download.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html</a>).

To get the current value of the thread-local binding, you must deref (@) the
thread-local object. The body of expressions will be executed once per thread
and future derefs will be cached.

Note that while nothing is preventing you from passing these objects around
to other threads (once you deref the thread-local, the resulting object knows
nothing about threads), you will of course lose some of the benefit of having
thread-local objects.</pre></div><div class="public anchor" id="var-thread-local*"><h3>thread-local*</h3><div class="usage"><code>(thread-local* init)</code></div><pre class="doc">Non-macro version of thread-local - see documentation for same.
</pre></div><div class="public anchor" id="var-update-peek"><h3>update-peek</h3><div class="usage"><code>(update-peek stack f &amp; args)</code></div><pre class="doc">Update the element in stack that would be returned by peek, returning a new stack.
</pre></div><div class="public anchor" id="var-verify"><h3>verify</h3><h4 class="type">macro</h4><div class="usage"><code>(verify test &amp; args)</code></div><pre class="doc">Raise exception unless test returns true.
</pre></div><div class="public anchor" id="var-with-adjustments"><h3>with-adjustments</h3><h4 class="type">macro</h4><div class="usage"><code>(with-adjustments adjustment bindings &amp; body)</code></div><pre class="doc">Create new bindings for binding args, by applying adjustment
function to current values of bindings.</pre></div><div class="public anchor" id="var-with-timing"><h3>with-timing</h3><h4 class="type">macro</h4><div class="usage"><code>(with-timing &amp; body)</code></div><pre class="doc">Same as clojure.core/time but returns a vector of a the result of
the code and the milliseconds rather than printing a string. Runs
the code in an implicit do.</pre></div></div></body></html>