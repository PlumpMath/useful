<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>flatland.useful.map documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Useful 0.11.1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flatland</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>useful</span></div></div></li><li class="depth-3 branch"><a href="flatland.useful.bean.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bean</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.cli.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cli</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.compress.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compress</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.datatypes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datatypes</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.deftype.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deftype</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.dispatch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dispatch</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.exception.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exception</span></div></a></li><li class="depth-3"><a href="flatland.useful.experimental.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>experimental</span></div></a></li><li class="depth-4 branch"><a href="flatland.useful.experimental.delegate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delegate</span></div></a></li><li class="depth-4"><a href="flatland.useful.experimental.unicode.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unicode</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.fn.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>fn</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.io.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.java.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>java</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.macro.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macro</span></div></a></li><li class="depth-3 branch current"><a href="flatland.useful.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.ns.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ns</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.parallel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parallel</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.seq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>seq</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.string.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>string</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-3"><a href="flatland.useful.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="flatland.useful.map.html#var-assoc-in.21"><div class="inner"><span>assoc-in!</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-assoc-in*"><div class="inner"><span>assoc-in*</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-assoc-or"><div class="inner"><span>assoc-or</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-dissoc-in*"><div class="inner"><span>dissoc-in*</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-filter-keys"><div class="inner"><span>filter-keys</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-filter-keys-by-val"><div class="inner"><span>filter-keys-by-val</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-filter-vals"><div class="inner"><span>filter-vals</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-index-by"><div class="inner"><span>index-by</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-into-map"><div class="inner"><span>into-map</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-keyed"><div class="inner"><span>keyed</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-map-keys"><div class="inner"><span>map-keys</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-map-keys-and-vals"><div class="inner"><span>map-keys-and-vals</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-map-to"><div class="inner"><span>map-to</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-map-vals"><div class="inner"><span>map-vals</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-map-vals-with-keys"><div class="inner"><span>map-vals-with-keys</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-merge-in"><div class="inner"><span>merge-in</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-multi-map"><div class="inner"><span>multi-map</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-ordering-map"><div class="inner"><span>ordering-map</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-position"><div class="inner"><span>position</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-remove-keys"><div class="inner"><span>remove-keys</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-remove-keys-by-val"><div class="inner"><span>remove-keys-by-val</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-remove-vals"><div class="inner"><span>remove-vals</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-update-each"><div class="inner"><span>update-each</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-update-in.21"><div class="inner"><span>update-in!</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-update-in*"><div class="inner"><span>update-in*</span></div></a></li><li class="depth-1"><a href="flatland.useful.map.html#var-update-within"><div class="inner"><span>update-within</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">flatland.useful.map</h2><pre class="doc"></pre><div class="public anchor" id="var-assoc-in.21"><h3>assoc-in!</h3><div class="usage"><code>(assoc-in! m ks v)</code></div><pre class="doc">Associates a value in a nested associative structure, where ks is a sequence of keys
and v is the new value and returns a new nested structure. The associative structure
can have transients in it, but if any levels do not exist, non-transient hash-maps will
be created.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L169">view source</a></div></div><div class="public anchor" id="var-assoc-in*"><h3>assoc-in*</h3><div class="usage"><code>(assoc-in* m keys v)</code></div><pre class="doc">Associates a value in a nested associative structure, where ks is a sequence of keys and v is the
new value and returns a new nested structure.  If any levels do not exist, hash-maps will be
created. This implementation was adapted from clojure.core, but the behavior is more correct if
keys is empty.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L95">view source</a></div></div><div class="public anchor" id="var-assoc-or"><h3>assoc-or</h3><div class="usage"><code>(assoc-or m key val)</code><code>(assoc-or m key val &amp; kvs)</code></div><pre class="doc">Create mapping from each key to val in map only if existing val is nil.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L18">view source</a></div></div><div class="public anchor" id="var-dissoc-in*"><h3>dissoc-in*</h3><div class="usage"><code>(dissoc-in* m keys)</code></div><pre class="doc">Dissociates a value in a nested associative structure, where ks is a sequence of keys and returns
a new nested structure. If any resulting maps are empty, they will be removed from the new
structure. This implementation was adapted from clojure.core.contrib, but the behavior is more
correct if keys is empty.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L80">view source</a></div></div><div class="public anchor" id="var-filter-keys"><h3>filter-keys</h3><div class="usage"><code>(filter-keys m pred)</code></div><pre class="doc">Returns a map that only contains keys where (pred key) returns true.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L218">view source</a></div></div><div class="public anchor" id="var-filter-keys-by-val"><h3>filter-keys-by-val</h3><div class="usage"><code>(filter-keys-by-val pred m)</code></div><pre class="doc">Returns all keys in map for which (pred value) returns true.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L196">view source</a></div></div><div class="public anchor" id="var-filter-vals"><h3>filter-vals</h3><div class="usage"><code>(filter-vals m pred)</code></div><pre class="doc">Returns a map that only contains values where (pred value) returns true.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L207">view source</a></div></div><div class="public anchor" id="var-index-by"><h3>index-by</h3><div class="usage"><code>(index-by f coll)</code></div><pre class="doc">Returns a map from the result of calling f on each item in coll to that item.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L184">view source</a></div></div><div class="public anchor" id="var-into-map"><h3>into-map</h3><div class="usage"><code>(into-map &amp; args)</code></div><pre class="doc">Convert a list of heterogeneous args into a map. Args can be alternating keys and values,
maps of keys to values or collections of alternating keys and values. If the first arg is
a function, it will be used for merging duplicate values.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L30">view source</a></div></div><div class="public anchor" id="var-keyed"><h3>keyed</h3><h4 class="type">macro</h4><div class="usage"><code>(keyed vars)</code><code>(keyed key-type vars)</code></div><pre class="doc">Create a map in which, for each symbol S in vars, (keyword S) is a
key mapping to the value of S in the current scope. If passed an optional
:strs or :syms first argument, use strings or symbols as the keys instead.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L8">view source</a></div></div><div class="public anchor" id="var-map-keys"><h3>map-keys</h3><div class="usage"><code>(map-keys m f &amp; args)</code></div><pre class="doc">Create a new map from m by calling function f on each key to get a new key.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L55">view source</a></div></div><div class="public anchor" id="var-map-keys-and-vals"><h3>map-keys-and-vals</h3><div class="usage"><code>(map-keys-and-vals m f &amp; args)</code></div><pre class="doc">Create a new map from m by calling function f on each key &amp; each value to get a new key &amp; value
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L72">view source</a></div></div><div class="public anchor" id="var-map-to"><h3>map-to</h3><div class="usage"><code>(map-to f coll)</code></div><pre class="doc">Returns a map from each item in coll to f applied to that item.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L177">view source</a></div></div><div class="public anchor" id="var-map-vals"><h3>map-vals</h3><div class="usage"><code>(map-vals m f &amp; args)</code></div><pre class="doc">Create a new map from m by calling function f on each value to get a new value.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L47">view source</a></div></div><div class="public anchor" id="var-map-vals-with-keys"><h3>map-vals-with-keys</h3><div class="usage"><code>(map-vals-with-keys m f &amp; args)</code></div><pre class="doc">Create a new map from m by calling function f, with two arguments (the key and value)
to get a new value.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L63">view source</a></div></div><div class="public anchor" id="var-merge-in"><h3>merge-in</h3><div class="usage"><code>(merge-in &amp; args)</code></div><pre class="doc">Merge multiple nested maps.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L152">view source</a></div></div><div class="public anchor" id="var-multi-map"><h3>multi-map</h3><div class="usage"><code>(multi-map m)</code></div><pre class="doc">Takes a map with keys and values that can be sets or individual objects and returns a map from
objects to sets. Used to create associations between two sets of objects.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L229">view source</a></div></div><div class="public anchor" id="var-ordering-map"><h3>ordering-map</h3><div class="usage"><code>(ordering-map key-order)</code><code>(ordering-map key-order default-comparator)</code></div><pre class="doc">Create an empty map with a custom comparator that puts the given keys first, in the order
specified. Other keys will be placed after the special keys, sorted by the default-comparator.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L238">view source</a></div></div><div class="public anchor" id="var-position"><h3>position</h3><div class="usage"><code>(position coll)</code></div><pre class="doc">Returns a map from item to the position of its first occurence in coll.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L191">view source</a></div></div><div class="public anchor" id="var-remove-keys"><h3>remove-keys</h3><div class="usage"><code>(remove-keys m pred)</code></div><pre class="doc">Returns a map that only contains keys where (pred key) returns false.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L224">view source</a></div></div><div class="public anchor" id="var-remove-keys-by-val"><h3>remove-keys-by-val</h3><div class="usage"><code>(remove-keys-by-val pred m)</code></div><pre class="doc">Returns all keys of map for which (pred value) returns false.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L202">view source</a></div></div><div class="public anchor" id="var-remove-vals"><h3>remove-vals</h3><div class="usage"><code>(remove-vals m pred)</code></div><pre class="doc">Returns a map that only contains values where (pred value) returns false.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L213">view source</a></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update m key f &amp; args)</code></div><pre class="doc">Update a value for the given key in a map where f is a function that takes the previous value and
the supplied args and returns the new value. Like update-in*, unchanged values are not
re-assoc&apos;d.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L120">view source</a></div></div><div class="public anchor" id="var-update-each"><h3>update-each</h3><div class="usage"><code>(update-each m keys f &amp; args)</code></div><pre class="doc">Update the values for each of the given keys in a map where f is a function that takes each
previous value and the supplied args and returns a new value. Like update-in*, unchanged values
are not re-assoc&apos;d.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L127">view source</a></div></div><div class="public anchor" id="var-update-in.21"><h3>update-in!</h3><div class="usage"><code>(update-in! m [k &amp; ks] f &amp; args)</code></div><pre class="doc">&apos;Updates&apos; a value in a nested associative structure, where ks is a sequence of keys and
f is a function that will take the old value and any supplied args and return the new
value, and returns a new nested structure. The associative structure can have transients
in it, but if any levels do not exist, non-transient hash-maps will be created.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L157">view source</a></div></div><div class="public anchor" id="var-update-in*"><h3>update-in*</h3><div class="usage"><code>(update-in* m keys f &amp; args)</code></div><pre class="doc">Updates a value in a nested associative structure, where ks is a sequence of keys and f is a
function that will take the old value and any supplied args and return the new value, and returns
a new nested structure. If any levels do not exist, hash-maps will be created. This implementation
was adapted from clojure.core, but the behavior is more correct if keys is empty and unchanged
values are not re-assoc&apos;d.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L105">view source</a></div></div><div class="public anchor" id="var-update-within"><h3>update-within</h3><div class="usage"><code>(update-within m keyseq f &amp; args)</code></div><pre class="doc">Like update-in*, but don&apos;t call f at all unless the map contains something at the given keyseq.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/map.clj#L136">view source</a></div></div></div></body></html>