<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>flatland.useful.fn documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Useful 0.11.1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>flatland</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>useful</span></div></div></li><li class="depth-3 branch"><a href="flatland.useful.bean.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bean</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.cli.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cli</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.compress.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compress</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.datatypes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>datatypes</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.debug.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debug</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.deftype.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deftype</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.dispatch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dispatch</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.exception.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exception</span></div></a></li><li class="depth-3"><a href="flatland.useful.experimental.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>experimental</span></div></a></li><li class="depth-4 branch"><a href="flatland.useful.experimental.delegate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>delegate</span></div></a></li><li class="depth-4"><a href="flatland.useful.experimental.unicode.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>unicode</span></div></a></li><li class="depth-3 branch current"><a href="flatland.useful.fn.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>fn</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.io.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>io</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.java.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>java</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.macro.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macro</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.map.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>map</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.ns.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ns</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.parallel.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parallel</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.seq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>seq</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.string.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>string</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3 branch"><a href="flatland.useful.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-3"><a href="flatland.useful.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="flatland.useful.fn.html#var-.21"><div class="inner"><span>!</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-all"><div class="inner"><span>all</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-annotate"><div class="inner"><span>annotate</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-any"><div class="inner"><span>any</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-ap"><div class="inner"><span>ap</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-applied"><div class="inner"><span>applied</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-as-fn"><div class="inner"><span>as-fn</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-decorate"><div class="inner"><span>decorate</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-fix"><div class="inner"><span>fix</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-fixing"><div class="inner"><span>fixing</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-given"><div class="inner"><span>given</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-ignoring-nils"><div class="inner"><span>ignoring-nils</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-key-comparator"><div class="inner"><span>key-comparator</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-knit"><div class="inner"><span>knit</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-memoize-last"><div class="inner"><span>memoize-last</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-rate-limited"><div class="inner"><span>rate-limited</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-thrush"><div class="inner"><span>thrush</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-to-fix"><div class="inner"><span>to-fix</span></div></a></li><li class="depth-1"><a href="flatland.useful.fn.html#var-validator"><div class="inner"><span>validator</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">flatland.useful.fn</h2><pre class="doc"></pre><div class="public anchor" id="var-.21"><h3>!</h3><div class="usage"></div><pre class="doc"></pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L3">view source</a></div></div><div class="public anchor" id="var-all"><h3>all</h3><div class="usage"><code>(all &amp; preds)</code></div><pre class="doc">Takes a list of predicates and returns a new predicate that returns true if all do.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L88">view source</a></div></div><div class="public anchor" id="var-annotate"><h3>annotate</h3><div class="usage"><code>(annotate x &amp; fs)</code></div><pre class="doc">A vector of [x (f1 x) (f2 x) ...].
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L20">view source</a></div></div><div class="public anchor" id="var-any"><h3>any</h3><div class="usage"><code>(any &amp; preds)</code></div><pre class="doc">Takes a list of predicates and returns a new predicate that returns true if any do.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L82">view source</a></div></div><div class="public anchor" id="var-ap"><h3>ap</h3><div class="usage"></div><pre class="doc">A shorthand version of applied
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L178">view source</a></div></div><div class="public anchor" id="var-applied"><h3>applied</h3><div class="usage"><code>(applied f)</code></div><pre class="doc">A version of f that uses apply on its args.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L173">view source</a></div></div><div class="public anchor" id="var-as-fn"><h3>as-fn</h3><div class="usage"><code>(as-fn x)</code></div><pre class="doc">Turn an object into a fn if it is not already, by wrapping it in constantly.
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L25">view source</a></div></div><div class="public anchor" id="var-decorate"><h3>decorate</h3><div class="usage"><code>(decorate &amp; fs)</code></div><pre class="doc">Return a function f such that (f x) =&gt; [x (f1 x) (f2 x) ...].
</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L15">view source</a></div></div><div class="public anchor" id="var-fix"><h3>fix</h3><div class="usage"><code>(fix x &amp; clauses)</code></div><pre class="doc">Walk through clauses, a series of predicate/transform pairs. The
first predicate that x satisfies has its transformation clause
called on x. Predicates or transforms may be values (eg true or nil)
rather than functions; these will be treated as functions that
return that value.

The last &quot;pair&quot; may be only a transform with no pred: in that case it
is unconditionally used to transform x, if nothing previously matched.

If no predicate matches, then x is returned unchanged.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L30">view source</a></div></div><div class="public anchor" id="var-fixing"><h3>fixing</h3><div class="usage"><code>(fixing x pred transform &amp; args)</code></div><pre class="doc">A version of fix that fits better with the unified update model: instead of multiple clauses,
additional args to the transform function are permitted. For example,
(swap! my-atom fixing map? update-in [k] inc)</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L57">view source</a></div></div><div class="public anchor" id="var-given"><h3>given</h3><h4 class="type">macro</h4><div class="usage"><code>(given x &amp; clauses)</code></div><pre class="doc">A macro combining the features of fix and fixing, by using parentheses to group the
additional arguments to each clause:
(-&gt; x
    (given string? read-string
           map? (dissoc :x :y :z)
           even? (/ 2)))</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L66">view source</a></div></div><div class="public anchor" id="var-ignoring-nils"><h3>ignoring-nils</h3><div class="usage"><code>(ignoring-nils f)</code></div><pre class="doc">Create a new version of a function which ignores all nils in its arguments:
((ignoring-nils +) 1 nil 2 3 nil) yields 6.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L108">view source</a></div></div><div class="public anchor" id="var-key-comparator"><h3>key-comparator</h3><div class="usage"><code>(key-comparator modifier)</code><code>(key-comparator direction modifier)</code></div><pre class="doc">Given a transformation function (and optionally a direction), return a
comparator which does its work by comparing the values of (transform x) and
(transform y).</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L129">view source</a></div></div><div class="public anchor" id="var-knit"><h3>knit</h3><div class="usage"><code>(knit &amp; fs)</code></div><pre class="doc">Takes a list of functions (f1 f2 ... fn) and returns a new function F. F takes
a collection of size n (x1 x2 ... xn) and returns a vector [(f1 x1) (f2 x2) ... (fn xn)].
Similar to Haskell&apos;s ***, and a nice complement to juxt (which is Haskell&apos;s &amp;&amp;&amp;).</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L94">view source</a></div></div><div class="public anchor" id="var-memoize-last"><h3>memoize-last</h3><div class="usage"><code>(memoize-last f)</code></div><pre class="doc">A version of memoize that only remembers the result for a single input
argument at a time. eg, if you call (f 1) (f 1) (f 2) (f 1), only the
second call is memoized, because it is the same argument you just gave.
The third and fourth calls see a new argument, and therefore refresh the
cached value.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L158">view source</a></div></div><div class="public anchor" id="var-rate-limited"><h3>rate-limited</h3><div class="usage"><code>(rate-limited f ms-period)</code></div><pre class="doc">Create a version of a function which &apos;refuses&apos; to be called too
frequently. If it has successfully been called in the last N milliseconds,
calls to it will return nil; if no calls have succeeded in that period, args
will be passed along to the base function.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L142">view source</a></div></div><div class="public anchor" id="var-thrush"><h3>thrush</h3><div class="usage"><code>(thrush &amp; args)</code></div><pre class="doc">Takes the first argument and applies the remaining arguments to it as functions from left to right.
This tiny implementation was written by Chris Houser. <a href="http://blog.fogus.me/2010/09/28/thrush-in-clojure-redux">http://blog.fogus.me/2010/09/28/thrush-in-clojure-redux</a></pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L102">view source</a></div></div><div class="public anchor" id="var-to-fix"><h3>to-fix</h3><div class="usage"><code>(to-fix &amp; clauses)</code></div><pre class="doc">A &quot;curried&quot; version of fix, which sets the clauses once, yielding a
function that calls fix with the specified first argument.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L50">view source</a></div></div><div class="public anchor" id="var-validator"><h3>validator</h3><div class="usage"><code>(validator pred)</code></div><pre class="doc">Create a version of a predicate that only tests its output for truthiness,
returning the original input value if the predicate evaluates to anything
truthy, and nil otherwise. ((validator even?) 10) =&gt; 10, even though
(even? 10) is true.</pre><div class="src-link"><a href="http://github.com/flatland/useful/blob/develop/src/flatland/useful/fn.clj#L5">view source</a></div></div></div></body></html>